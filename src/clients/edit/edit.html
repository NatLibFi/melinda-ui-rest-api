<!DOCTYPE html>
<html lang="fi">

<!-- -------------------------------------------------------------------------- -->
<!-- Head -->
<!-- -------------------------------------------------------------------------- -->

<head>
  <title>EDIT | Melinda</title>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" href="/common/images/favicon.ico">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=DM+Serif+Text&family=Public+Sans:wght@300;500;600&family=Roboto+Mono&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="edit.css">

  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
  <script type="module" src="edit.js"></script>
  <script src="/common/navbar.js"></script>
  <script src="/common/footer.js"></script>
</head>

<!-- -------------------------------------------------------------------------- -->
<!-- Body -->
<!-- -------------------------------------------------------------------------- -->

<body onload="initialize()">

  <div id="bodywrapper" class="viewport-full VBox">

    <!-- ------------------------------------------------------------------------ -->
    <!-- Navigation bar -->
    <melinda-navbar></melinda-navbar>

    <!-- ------------------------------------------------------------------------ -->
    <!-- Progress bar -->
    <div id="progressbar" class="progress-bar-inactive"></div>

    <!-- ------------------------------------------------------------------------ -->
    <!-- Application -->
    <div id="root">

      <!-- ---------------------------------------------------------------------- -->
      <!-- Loading "screen" -->
      <div id="loading"></div>

      <!-- ---------------------------------------------------------------------- -->
      <!-- Login tab -->
      <!-- NOTE: hidden attribute does not work on forms, so we use element style -->
      <form id="login" class="VBox modal-content BoxShadow" style="display: none;">
        <div class="VBox Input">
          <label for="username">Käyttäjätunnus</label>
          <input id="login-username" name="username" autofocus autocomplete="username" />
        </div>
        <div class="VBox Input">
          <label for="password">Salasana</label>
          <input id="login-password" type="password" name="password" autocomplete="current-password" />
        </div>
        <div class="HBox Input" style="align-items: baseline;">
          <input id="acceptterms" type="checkbox">
          <label for="acceptterms" style="padding-left: 8px;">
            Hyväksyn
            <a href="https://www.kiwi.fi/pages/viewpage.action?pageId=148177248" target="_blank">
              tietosuojaselosteen</a>
            ja evästeiden käytön.
            <br /><br />
            Evästeitä käytetään käyttäjän autentikoimiseen istunnon aikana.</label>
        </div>
        <div id="info"></div>
        <div style="display: flex; flex-direction: column; align-items: flex-end;">
          <button onClick="return login(event)">Kirjaudu</button>
        </div>
      </form>

      <!-- ---------------------------------------------------------------------- -->
      <!-- Muokkaus tab -->
      <div id="muuntaja" hidden>

        <!-- ------------------------------------------------------------------------ -->
        <!-- Record-Merge Panel -->
        <div class="record-merge-panel">

          <div id="source" class="col BoxShadow">
            <form class="ToolBar HBox header">
              <div class="Filler VBox Input">
                <label>Alkuperäinen tietue</label>
                <input id="ID" />
              </div>
              <button class="material-icons" onclick="return doFetch(event)">search</button>
            </form>
            <div id="Record" class="marc-record">
            </div>
          </div>

          <div id="result" class="col BoxShadow">
            <div class="ToolBar HBox header">
              <div class="Filler">TULOSTIETUE</div>
              <button class="material-icons" onClick="onNewField(event)">add</button>
              <button class="material-icons" onClick="onEdit(event)">edit</button>
              <button class="material-icons" onClick="onSave(event)" disabled>save</button>
            </div>
            <div id="Record" class="marc-record">
            </div>
          </div>

        </div>
      </div>

      <!-- ---------------------------------------------------------------------- -->
      <!-- Field edit dialog -->
      <div id="fieldEditDlg" class="modal" onclick="return editDlgClose(event)">
        <div class="modal-content BoxShadow" onclick="return ignore(event)">
          <div id="original" hidden>
            <span id="field" class="marc-record"></span><br />
            <div style="display: flex; justify-content: right;">
              <button onclick="return editDlgUseOriginal(event)">Käytä alkuperäistä</button>
            </div>
            <hr />
          </div>
          <div class="fieldedit marc-record">
            <div style="display: flex;">
              Tag: <div id="tag"></div>
              Ind1: <div id="ind1"></div>
              Ind2: <div id="ind2"></div>
            </div>
            <hr />
            <div id="fieldlist" width="100%">
            </div>
            <button onclick="return onAddField(event)">Uusi osakenttä</button>
          </div>
          <hr />
          <div style="display: flex; justify-content: right;">
            <button onclick="return editDlgClose(event)">Peru muutokset</button>
            <button onclick="return editDlgOK(event)">Tallenna muutokset</button>
          </div>
        </div>
      </div>

      <!-- ---------------------------------------------------------------------- -->
      <!-- Tab for server side notes -->
      <div id="server-note" hidden></div>

      <!-- For displaying info messages and errors to user -->
      <div id="snackbars" class="snackbars"></div>
    </div>

    <!-- ------------------------------------------------------------------------ -->
    <!-- Footer -->
    <melinda-footer class="Filler VBox"></melinda-footer>

  </div>

</body>

</html>