<!DOCTYPE html>
<html>

<!-- -------------------------------------------------------------------------- -->
<!-- Head -->
<!-- -------------------------------------------------------------------------- -->

<head>
  <link rel="shortcut icon" href="/common/images/favicon.png" />
  <link rel="stylesheet" href="viewer.css" />
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Montserrat' />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script type="module" src="viewer.js"></script>
</head>

<!-- -------------------------------------------------------------------------- -->
<!-- Body -->
<!-- -------------------------------------------------------------------------- -->

<body onload="initialize()">
  <!-- ------------------------------------------------------------------------ -->
  <!-- Nav bar -->

  <div id="navbar"></div>

  <!-- ------------------------------------------------------------------------ -->
  <!-- Application "tabs" -->

  <div id="root">

    <!-- ---------------------------------------------------------------------- -->
    <!-- Loading "screen" -->

    <div id="loading">
    </div>

    <!-- ---------------------------------------------------------------------- -->
    <!-- Login tab -->
    <!-- NOTE: hidden attribute does not work on forms, so we use element style -->

    <form id="login" class="VBox modal-content BoxShadow" style="display: none;">
      <div class="VBox Input">
        <label for="username">Käyttäjätunnus</label>
        <input id="login-username" name="username" />
      </div>
      <div class="VBox Input">
        <label for="password">Salasana</label>
        <input id="login-password" type="password" name="password" />
      </div>
      <div class="HBox Input" style="align-items: baseline;">
        <input id="acceptterms" type="checkbox">
        <label for="acceptterms" style="padding-left: 8px;">
          Hyväksyn
          <a href="https://www.kiwi.fi/pages/viewpage.action?pageId=148177248" target="_blank">
            tietosuojaselosteen</a>
          ja evästeiden käytön.
          <br /><br />
          Evästeitä käytetään käyttäjän autentikoimiseen istunnon aikana.</label>
      </div>
      <div id="info"></div>
      <div style="display: flex; flex-direction: column; align-items: flex-end;">
        <button onClick="return login(event)">Kirjaudu</button>
      </div>
    </form>

    <!-- ---------------------------------------------------------------------- -->
    <!-- Muuntaja tab -->

    <div id="viewer" hidden>
      <div class="IconBar ToolBar">
        <button><a class="material-icons" href="https://www.kiwi.fi/x/iBcvBQ" target="_blank"
            rel="noopener noreferrer">help_outline</a></button>
        <!-- <button class="material-icons" onClick="onNew(event)">add</button> -->
        <!-- <button class="material-icons" onClick="onSearch(event)">search</button> -->
        <div class="dropdown">
          <button id="account-btn" class="material-icons">account_circle</button>
          <div id="account-menu" class="dropdown-content">
            <div class="menu-header" id="username">Tuntematon</div>
            <hr />
            <div class="menu-item" onClick="onAccount(event)">Kirjaudu ulos</div>
          </div>
        </div>
      </div>


      <!-- Viewer Toolbar -->
      <div class="tools ToolBar">

        <form class="ToolBar HBox">

          <div class="Select VBox">
            <label>Log type</label>
            <select id="logType">
              <option value="MERGE_LOG">Merge</option>
              <option value="MATCH_LOG">Match</option>
            </select>
          </div>

          <div class="Filler VBox Input">
            <label>Id (Correlation id)</label>
            <input class="inputField uuidInput" id="id" placeholder="00000000-0000-0000-0000-000000000000" />
          </div>

          <!-- ---------------------------------------------------------------------- -->
          <!-- Button for opening a modal containing correlation id list -->
          <button id="viewCorrelationIdsButton" type="button" class="material-icons tooltip"
            tooltip-text="View id list" onclick="return doOpenCorrelationIdListModal(event)">view_list</button>
          <!-- ---------------------------------------------------------------------- -->

          <div class="Select VBox">
            <label>Sequence</label>
            <select id="sequence" disabled="true" onchange="return loadLog(event)">
            </select>
          </div>

          <input type="hidden" id="logType" value="mergeLog" />

          <button class="material-icons tooltip" tooltip-text="Etsi"
            onclick="return doSearchPress(event)">search</button>

        </form>

        <button id="protect" class="material-icons tooltip" tooltip-text="Turvaa" onclick="return protect(event)"
          disabled="true">push_pin</button>

        <button id="share" class="material-icons tooltip" tooltip-text="Jaa"
          onclick="return copyLink(event)">share</button>

        <button id="delete" class="material-icons tooltip" tooltip-text="Poista" onclick="return remove(event)"
          disabled="true">delete</button>
        <button id="settings" class="material-icons tooltip" tooltip-text="Asetukset" disabled="true">settings</button>

      </div>


      <!-- Record Merge Panel -->
      <div class="record-merge-panel">

        <div class="col">
          <div id="record1" class="BoxShadow">
            <div class="header">
              <p class="title">Sisääntuleva tietue</p>
              <div class="show-hide-buttons-wrap">
                <button id="showNote" class="material-icons show-hide-buttons tooltip" tooltip-text="Näytä"
                  onclick="return showNote(event, 'record1')">expand_more</button>
                <button id="hideNote" class="material-icons show-hide-buttons tooltip" tooltip-text="Piilota"
                  onclick="return hideNote(event, 'record1')">expand_less</button>
              </div>
            </div>
            <div class="note">
              <ul class="additional"></ul>
            </div>
            <div id="Record" class="marc-record">
            </div>
          </div>
        </div>
        <div class="col">
          <div id="record2" class="BoxShadow">
            <div class="header">
              <p class="title">Melinda-tietue</p>
              <div class="VBox Select">
                <label>Match nro.</label>
                <select id="match" onchange="return loadMatch(event)"></select>
              </div>
              <div class="show-hide-buttons-wrap">
                <button id="showNote" class="material-icons show-hide-buttons tooltip" tooltip-text="Näytä"
                  onclick="return showNote(event, 'record2')">expand_more</button>
                <button id="hideNote" class="material-icons show-hide-buttons tooltip" tooltip-text="Piilota"
                  onclick="return hideNote(event, 'record2')">expand_less</button>
              </div>
            </div>
            <div class="note">
              <ul class="additional"></ul>
            </div>
            <div id="Record" class="marc-record">
            </div>
          </div>
        </div>

        <div class="col">
          <div id="record3" class="BoxShadow">
            <div class="header">
              <p class="title">Yhdistetty tietue</p>
              <div class="show-hide-buttons-wrap">
                <button id="showNote" class="material-icons show-hide-buttons tooltip" tooltip-text="Näytä"
                  onclick="return showNote(event, 'record3')">expand_more</button>
                <button id="hideNote" class="material-icons show-hide-buttons tooltip" tooltip-text="Piilota"
                  onclick="return hideNote(event, 'record3')">expand_less</button>
              </div>
            </div>
            <div class="note">
              <ul class="additional"></ul>
            </div>
            <div id="Record" class="marc-record">
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

  <!-- ---------------------------------------------------------------------- -->
  <!-- Field edit dialog -->
  <div id="fieldEditDlg" class="modal" onclick="return editDlgClose(event)">
    <div class="modal-content BoxShadow" onclick="return ignore(event)">
      <span id="field" class="marc-record"></span><br />
      <div style="display: flex; justify-content: right;">
        <button onclick="return editDlgUseOriginal(event)">Käytä alkuperäistä</button>
      </div>
      <hr />
      <div class="fieldedit marc-record">
        <div style="display: flex;">
          Tag: <div id="tag"></div>
          Ind1: <div id="ind1"></div>
          Ind2: <div id="ind2"></div>
        </div>
        <hr />
        <div id="fieldlist" width="100%">
        </div>
        <button onclick="return onAddField(event)">Uusi osakenttä</button>
      </div>
      <hr />
      <div style="display: flex; justify-content: right;">
        <button onclick="return editDlgClose(event)">Peru muutokset</button>
        <button onclick="return editDlgOK(event)">Tallenna muutokset</button>
      </div>
    </div>
  </div>

  <!-- ---------------------------------------------------------------------- -->
  <!-- Search dialog -->
  <dialog id="searchDlg">
    Testi
  </dialog>

  <!-- ---------------------------------------------------------------------- -->
  <!-- Tab for server side notes -->
  <div id="server-note" hidden>
  </div>

</body>

</html>